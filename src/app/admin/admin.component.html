<div class="row">
  <div class="col-md-1"></div>
  <div class="col-md-10">
    <div class="card">
      <div class="card-head">
      </div>
      <div class="card-body">
        <ngb-tabset>
          <ngb-tab>
            <ng-template ngbTabTitle>Manage<b> Employees</b></ng-template>
            <ng-template ngbTabContent>
              <div class="row" style="padding-top: 15px">
                <div class="col-md-4">
                  <div class="list-group">
                    <button type="button" *ngFor="let employee of employees" (click)="onSelect(employee, 'employee')" [ngClass]="{'active': selectedEmployee == employee }" class="list-group-item list-group-item-action">
                      {{ employee.firstname }}
                      {{ employee.lastname }}
                    </button>
                  </div>
                </div>
                <div class="col-md-8">
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text inputtext" id="inputGroup-sizing-default">ID</span>
                    </div>
                    <input id="employeeID" type="text" readonly [value]="selectedEmployee.id" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                  </div>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text inputtext" id="inputGroup-sizing-default">First Name</span>
                    </div>
                    <input id="employeeFirstName" type="text" [value]="selectedEmployee.firstname" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                  </div>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text inputtext" id="inputGroup-sizing-default">Last Name</span>
                    </div>
                    <input id="employeeLastName" type="text" [value]="selectedEmployee.lastname" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                  </div>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text inputtext" id="inputGroup-sizing-default">Telefon</span>
                    </div>
                    <input id="employeeTelefon" type="text" [value]="selectedEmployee.telefon" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                  </div>
                  <hr/>


                  <div class="row" style="padding-top: 10px">
                    <div class="col-md-3"></div>
                    <div class="col-md-8 text-right">
                      <!--Delete should pref trigger a modal with warning and confirmation-->
                      <button type="button" (click)="deleteEmployee(employees, selectedEmployee)" class="btn btn-danger btn">Délét</button>
                      <button type="button" (click)="updateEmployee(employees, selectedEmployee)" class="btn btn-secondary btn">Update</button>
                      <!--add should pref trigger a modal with input fields-->
                      <button type="button" (click)="open(employeeModal)" class="btn btn-primary btn">Create new</button>
                    </div>
                    <div class="col-md-1">
                    </div>
                  </div>
                </div>
              </div>

            </ng-template>
          </ngb-tab>
          <ngb-tab>
            <ng-template ngbTabTitle>Manage<b> Treatments</b></ng-template>
            <ng-template ngbTabContent>
              <div class="row" style="padding-top: 15px">
                <div class="col-md-4">
                  <div class="list-group">
                    <button type="button" *ngFor="let treatment of treatments" (click)="onSelect(treatment, 'treatment')" [ngClass]="{'active': selectedTreatment == treatment }" class="list-group-item list-group-item-action">
                      {{ treatment.name }}
                    </button>
                  </div>
                </div>
                <div class="col-md-8">
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text inputtext" id="inputGroup-sizing-default">ID</span>
                    </div>
                    <input id="treatmentID" type="text" readonly [value]="selectedTreatment.id" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                  </div>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text inputtext" id="inputGroup-sizing-default">Name</span>
                    </div>
                    <input id="treatmentName" type="text" [value]="selectedTreatment.name" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                  </div>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text inputtext" id="inputGroup-sizing-default">Price</span>
                    </div>
                    <input id="treatmentPrice" type="text" [value]="selectedTreatment.price" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                  </div>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text inputtext" id="inputGroup-sizing-default">Duration</span>
                    </div>
                    <input id="treatmentDuration" type="text" [value]="selectedTreatment.duration" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                  </div>
                  <hr/>

                  <div class="row" style="padding-top: 10px">
                    <div class="col-md-3"></div>
                    <div class="col-md-8 text-right">
                      <button type="button" (click)="deleteTreatment(treatments, selectedTreatment)" class="btn btn-danger btn">Délét</button>
                      <button type="button" (click)="updateTreatment(treatments, selectedTreatment)" class="btn btn-secondary btn">Update</button>
                      <button type="button" (click)="open(treatmentModal)" class="btn btn-primary btn">Create new</button>
                    </div>
                    <div class="col-md-1">
                    </div>
                  </div>
                </div>
              </div>
            </ng-template>
          </ngb-tab>

          <ngb-tab>
            <ng-template ngbTabTitle>Manage<b> Events</b></ng-template>
            <ng-template ngbTabContent>
              <div class="row" style="padding-top: 15px">
                <div class="col-md-4">
                  <div class="list-group">
                    <button type="button" *ngFor="let event of events" (click)="onSelect(event, 'event')" [ngClass]="{'active': selectedEvent == event }" class="list-group-item list-group-item-action">
                      {{ event.customer }}
                      {{ event.treatment }}
                      {{ event.employee }}
                    </button>
                  </div>
                </div>
                <div class="col-md-8">
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text inputtext" id="inputGroup-sizing-default">Title</span>
                    </div>
                    <input type="text" [value]="selectedEvent.title" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                  </div>
                  <div class="input-group input-group-sm mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text inputtext" id="inputGroup-sizing-default">Customer</span>
                    </div>
                    <input type="text" [value]="selectedEvent.customer" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                  </div>
                  <div class="row" style="padding-bottom: 20px">
                    <div class="col-md-6">
                      <label for="employees">Select Employee</label>
                      <select class="form-control" id="employee" [(ngModel)]="eventEmployee" required>
                        <option *ngFor="let employee of employees" [value]=employee>{{ employee.firstname }} {{ employee.lastname }}</option>
                      </select>
                    </div>
                    <div class="col-md-6">
                      <label for="treatment">Select Treatment</label>
                      <select class="form-control" id="treatment" name="treatment" [(ngModel)]="eventTreatment" #treatment="ngModel" required>
                        <option *ngFor="let treatment of treatments" [value]=treatment>{{treatment.name}}</option>
                      </select>
                    </div>
                  </div>

                  <div class="row text-center">
                    <div class="col-md-6 text-left">

                      <form class="form-inline">
                        <div class="form-group">
                          <div class="input-group">
                            <input class="form-control" placeholder="yyyy-mm-dd" name="dp" [(ngModel)]="selectedEvent.eventDate" ngbDatepicker #d="ngbDatepicker">
                            <div class="input-group-append">
                              <button class="btn btn-outline-secondary" (click)="d.toggle()" type="button">
                          <!--  <img src="img/calendar-icon.svg" style="width: 1.2rem; height: 1rem; cursor: pointer;"/> -->
                          </button>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>

                    <div class="col-md-3 text-left">
                      <h6>Starting time</h6>
                      <ngb-timepicker [(ngModel)]="selectedEvent.startTime"></ngb-timepicker>
                    </div>
                    <div class="col-md-3 text-left">
                      <h6>Ending time</h6>
                      <ngb-timepicker [(ngModel)]="selectedEvent.endTime"></ngb-timepicker>
                    </div>
                  </div>

                  <hr/>

                  <div class="row" style="padding-top: 10px">
                    <div class="col-md-3"></div>
                    <div class="col-md-8 text-right">
                      <button type="button" (click)="deleteEvent(events, selectedEvent)" class="btn btn-danger btn">Délét</button>
                      <button type="button" (click)="updateEvent(events, selectedEvent)" class="btn btn-secondary btn">Update</button>
                      <button type="button" (click)="open(eventModal)" class="btn btn-primary btn">Create new</button>
                    </div>
                    <div class="col-md-1">
                    </div>
                  </div>
                </div>
              </div>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>
      </div>
    </div>
  </div>
  <div class="col-md-1"></div>

</div>

<!--modal with add-input fields-->
<ng-template #employeeModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Add new Employee</h4>
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">

    <div class="input-group input-group-sm mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text inputtext" id="inputGroup-sizing-default">First Name</span>
      </div>
      <input type="text" [(ngModel)]="newUser.firstname" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
    </div>
    <div class="input-group input-group-sm mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text inputtext" id="inputGroup-sizing-default">Last Name</span>
      </div>
      <input type="text" [(ngModel)]="newUser.lastname" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
    </div>
    <div class="input-group input-group-sm mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text inputtext" id="inputGroup-sizing-default">Telefon</span>
      </div>
      <input type="text" [(ngModel)]="newUser.telefon" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
    </div>
  </div>
  <div class="modal-footer">
    <button type="submit" (click)="c('Close click');createEmployee();" class="btn btn-primary btn">Add</button>
    <button type="button" class="btn btn-outline-dark" (click)="c('Close click')">Close</button>
  </div>
</ng-template>


<ng-template #treatmentModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Add new Treatment</h4>
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="input-group input-group-sm mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text inputtext" id="inputGroup-sizing-default">Name</span>
      </div>
      <input id="treatmentName" type="text" [(ngModel)]="newTreatment.name" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
    </div>
    <div class="input-group input-group-sm mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text inputtext" id="inputGroup-sizing-default">Duration</span>
      </div>
      <input id="treatmentDuration" type="text" [(ngModel)]="newTreatment.duration" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
    </div>
    <div class="input-group input-group-sm mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text inputtext" id="inputGroup-sizing-default">Price</span>
      </div>
      <input id="treatmentPrice" type="text" [(ngModel)]="newTreatment.price" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
    </div>
  </div>
  <div class="modal-footer">
    <button type="submit" (click)="c('Close click');createTreatment();" class="btn btn-primary btn">Add</button>
    <button type="button" class="btn btn-outline-dark" (click)="c('Close click')">Close</button>
  </div>

</ng-template>


<ng-template #eventModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Add new Event</h4>
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="input-group input-group-sm mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text inputtext" id="inputGroup-sizing-default">title</span>
      </div>
      <input type="text" [(ngModel)]="newTreatment.name" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
    </div>
    <div class="input-group input-group-sm mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text inputtext" id="inputGroup-sizing-default">Price</span>
      </div>
      <input type="text" [(ngModel)]="newTreatment.price" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
    </div>
    <div class="input-group input-group-sm mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text inputtext" id="inputGroup-sizing-default">Description</span>
      </div>
      <input type="text" [(ngModel)]="newTreatment.description" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
    </div>
  </div>
  <div class="modal-footer">
    <button type="submit" (click)="c('Close click');createTreatment();" class="btn btn-primary btn">Add</button>
    <button type="button" class="btn btn-outline-dark" (click)="c('Close click')">Close</button>
  </div>

</ng-template>
